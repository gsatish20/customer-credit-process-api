<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	
	<error-handler doc:name="global-error-handler" name="global-error-handler">
            <on-error-propagate type="APIKIT:BAD_REQUEST">
			<flow-ref doc:name="ef_setErrorResponse" doc:id="3001bb1e-a452-4f2b-be19-7288645d8b1e" name="ef_setErrorResponse"/>

            </on-error-propagate>
            <on-error-propagate type="APIKIT:NOT_FOUND">
			<flow-ref doc:name="ef_setErrorResponse" doc:id="8b0d0aeb-15d0-4ec8-96c3-6b8e453b6e35" name="ef_setErrorResponse"/>

            </on-error-propagate>
            <on-error-propagate type="APIKIT:METHOD_NOT_ALLOWED">
			<flow-ref doc:name="ef_setErrorResponse" doc:id="a38d24eb-ab18-48f8-8b30-d0213efc0114" name="ef_setErrorResponse"/>

            </on-error-propagate>
            <on-error-propagate type="APIKIT:NOT_ACCEPTABLE">
			<flow-ref doc:name="ef_setErrorResponse" doc:id="28c3852e-a672-4c4e-be4a-18e9cd59150e" name="ef_setErrorResponse"/>

            </on-error-propagate>
            <on-error-propagate type="APIKIT:UNSUPPORTED_MEDIA_TYPE">
			<flow-ref doc:name="ef_setErrorResponse" doc:id="53c94bee-92ad-4ba6-9d9b-c5139b11cdb3" name="ef_setErrorResponse"/>

            </on-error-propagate>
            <on-error-propagate type="APIKIT:NOT_IMPLEMENTED">
			<flow-ref doc:name="ef_setErrorResponse" doc:id="d11bd9f9-482f-48e3-b00a-4cdfbed71f95" name="ef_setErrorResponse"/>

            </on-error-propagate>
		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="0633a5d4-8dd8-4798-b9bf-49bc3c9d5fb5" >
			<flow-ref doc:name="ef_setErrorResponse" doc:id="0e8cdb69-a00e-4212-86ea-f86993b385e7" name="ef_setErrorResponse"/>
		</on-error-propagate>
        
</error-handler>
	<sub-flow name="ef_setErrorResponse" doc:id="a67a602d-ce1f-4513-b82d-cb660d4d2dfe" >
		<ee:transform doc:name="set Error Response" doc:id="7d9dac5f-b159-4f3b-8094-8b0e0f30195d" >
			<ee:message >
				<ee:set-payload resource="transformations\setErrorResponse.dwl" />
			

</ee:message>
			<ee:variables >
				<ee:set-variable variableName="httpStatus" ><![CDATA[if(error.errorMessage.typedAttributes.statusCode != null) error.errorMessage.typedAttributes.statusCode else 500]]></ee:set-variable>
			</ee:variables>
		</ee:transform>
		<logger level="ERROR" doc:name="Error Logger" doc:id="c47b5ccf-4893-4fa9-8390-b06e8f598e18" message="#[payload]" category="com.credit.api"/>
	</sub-flow>
	
	
</mule>
